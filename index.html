<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AF Assurances ‚Äì Soumission d‚Äôassurance</title>
  <meta name="description" content="AF Assurances ‚Äî Formulaire de soumission (auto / habitation) au Qu√©bec.">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#1a1d22;
      --muted:#5e6a74;
      --navy:#1f4f82;
      --navy-deep:#163a62;
      --border:#e9edf3;
      --panel:#ffffff;
      --card:#ffffff;
      --radius:14px;
      --shadow: 0 12px 30px rgba(16,33,55,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0; height:100%}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 750px at -10% -10%, rgba(31,79,130,.06), transparent 55%),
        radial-gradient(1200px 750px at 120% -10%, rgba(191,167,149,.20), transparent 60%),
        linear-gradient(180deg, #f7f4f1 0%, #fbfaf9 28%, #ffffff 70%, #ffffff 100%);
      min-height:100%;
      line-height:1.5;
    }
    header.site {
      text-align:center; padding:26px 16px 12px; border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.75); position:sticky; top:0; z-index:40; backdrop-filter: blur(6px) saturate(120%);
    }
    header.site h1{ margin:0 0 4px; font-size: clamp(22px,3.2vw,34px); letter-spacing:.3px; color:#101318 }
    header.site p{ margin:0; color:var(--muted) }
    .wrap{ max-width: 1000px; margin: 22px auto 80px; padding: 0 16px; }
    .card{ background: var(--card); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow); overflow:hidden; }
    .card > .head{ display:flex; align-items:center; gap:8px; padding:16px 18px; border-bottom:1px solid var(--border); background: linear-gradient(180deg, #ffffff, #fbfdff) }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius:999px; font-size:13px; background:#f2f6fb; border:1px solid var(--border); color:var(--navy) }
    form{ padding:18px }
    fieldset{ border:1px solid var(--border); padding:16px; border-radius:var(--radius); margin:0 0 18px; background: linear-gradient(180deg, #ffffff 0%, #fbfdff 100%); }
    legend{ padding:0 8px; color:var(--navy-deep); font-weight:700; letter-spacing:.2px; }
    label{ display:block; font-size:14px; color:#20252b; margin:2px 0 6px; }
    .inline-help,.help{ font-size:12px; color:var(--muted); margin-top:4px }
    input[type="text"],input[type="email"],input[type="tel"],input[type="date"],input[type="number"],select,textarea{
      width:100%; padding:12px; border-radius:12px; border:1px solid var(--border); background:#ffffff; color:var(--ink);
      outline:none; transition: box-shadow .15s, border-color .15s, background .15s;
    }
    input:focus,select:focus,textarea:focus{ border-color:var(--navy); box-shadow:0 0 0 3px rgba(31,79,130,.14) }
    textarea{ min-height:110px; resize:vertical }
    .row{ display:grid; grid-template-columns: repeat(12,1fr); gap:12px; margin-bottom:12px; }
    .col-12{grid-column: span 12} .col-6{grid-column: span 12} .col-4{grid-column: span 12} .col-3{grid-column: span 12} .col-2{grid-column: span 12} .col-7{grid-column: span 12}
    @media(min-width:760px){ .col-6{grid-column: span 6} .col-4{grid-column: span 4} .col-3{grid-column: span 3} .col-2{grid-column: span 2} .col-7{grid-column: span 7} }
    .radios{ display:flex; gap:16px; flex-wrap:wrap }
    .checks{ display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:8px 14px }
    .days{ display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap:8px 14px }
    .veh-card{ border:1px dashed var(--border); border-radius:14px; padding:12px; margin-top:10px; background:#fbfdff }
    .veh-head{ display:flex; justify-content:space-between; margin-bottom:8px; color:#1d2a38; font-weight:600 }
    .veh-actions button{ background:#f7fbff; color:#16314f; border:1px solid var(--border); padding:6px 10px; border-radius:10px; cursor:pointer }
    .consent{ display:flex; gap:10px; align-items:flex-start; margin-top:10px }
    .consent input{ margin-top:3px }
    .consent span{ flex:1; line-height:1.45 }
    .actions{ display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end; margin-top:8px }
    button{ border:0; cursor:pointer; padding:12px 16px; border-radius:12px; font-weight:700; background:linear-gradient(135deg,var(--navy), var(--navy-deep)); color:#fff; letter-spacing:.2px }
    button.secondary{ background:#f5f8fc; color:#16314f; border:1px solid var(--border) }
    .brand-footer{ display:flex; align-items:center; justify-content:space-between; margin-top:14px; padding:10px 6px }
    .allstate{ display:inline-flex; align-items:center; gap:10px; color:#1f4f82; font-weight:700; font-size:16px; letter-spacing:.2px }
    .af-sign{ font-family:'Great Vibes', cursive !important; font-size:42px !important; color:#0d2a45 !important; text-shadow:0 1px 0 rgba(255,255,255,.6), 0 2px 10px rgba(0,0,0,.06) !important; letter-spacing:.5px !important; transform: skewX(-6deg) !important; }
    .note-samedi{ display:none; font-size:12px; color:var(--muted); margin-top:6px }
  
.brand-footer{ display:flex; align-items:center; justify-content:space-between; margin-top:14px; padding:10px 6px }
.brand-left{ color:#111 !important; font-weight:500 !important; font-size:16px !important; letter-spacing:.1px !important }
.af-sign{ font-family:'Great Vibes', cursive !important; font-size:42px !important; color:#0d2a45 !important; text-shadow:0 1px 0 rgba(255,255,255,.6), 0 2px 10px rgba(0,0,0,.06) !important; letter-spacing:.5px !important; transform: skewX(-6deg) !important; }

.visually-hidden{position:absolute!important;left:-10000px!important;top:auto!important;width:1px!important;height:1px!important;overflow:hidden!important}
</style>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site">
    <h1 id="hdr_title">AF Assurances ‚Äì Soumission d‚Äôassurance</h1>
    <p id="hdr_sub">Auto ‚Ä¢ Habitation ‚Äî Accessible, claire & humaine</p>
  
<div style="margin-top:8px">
  <label for="langSelect" class="visually-hidden">Langue / Language</label>
  <select id="langSelect" aria-label="Langue / Language" style="padding:8px 12px; border-radius:10px; border:1px solid #e0e6ee">
    <option value="fr">Fran√ßais</option>
    <option value="en">English</option>
  </select>
</div>

</header>

  <div class="wrap">
    <div class="card">
      <div class="head">
        <span class="pill">üöó Auto</span>
        <span class="pill">üè† Habitation</span>
      </div>

      <form id="soumission" action="https://formspree.io/f/xrblvlnw" method="post" novalidate>
  <div id="formAlert" style="display:none;margin:10px 0 16px;padding:12px 14px;border-radius:12px;border:1px solid #e1e8f0;background:#f6fbf6;color:#0f5132"></div>
        <input type="hidden" name="_subject" value="Nouvelle soumission d‚Äôassurance">
        <input type="hidden" name="_next" value="https://merlinthenub-cyber.github.io/soumission-auto/merci.html">

        <!-- INFORMATIONS PERSONNELLES -->
        <fieldset>
          <legend id="lg_infos">Informations personnelles</legend>
          <div class="row">
            <div class="col-6">
              <label id="lbl_prenom" for="prenom">Pr√©nom *</label>
              <input id="prenom" name="prenom" type="text" autocomplete="given-name" required>
              <div id="help_perm_p" class="inline-help">Selon votre permis de conduire</div>
            </div>
            <div class="col-6">
              <label id="lbl_nom" for="nom">Nom de famille *</label>
              <input id="nom" name="nom" type="text" autocomplete="family-name" required>
              <div id="help_perm_n" class="inline-help">Selon votre permis de conduire</div>
            </div>
            <div class="col-6">
              <label id="lbl_dn" for="date_naissance">Date de naissance *</label>
              <input id="date_naissance" name="date_naissance" type="date" required>
            </div>
            <div class="col-6">
              <label id="lbl_email" for="email">Courriel *</label>
              <input id="email" name="email" type="email" autocomplete="email" required>
            </div>
            <div class="col-6">
              <label id="lbl_tel" for="tel">T√©l√©phone *</label>
              <input id="tel" name="tel" type="tel" autocomplete="tel" placeholder="514‚Äë555‚Äë1234" required>
            </div>
            <div class="col-6"><label id="lbl_etat_civil" for="etat_civil">√âtat civil *</label><select id="etat_civil" name="etat_civil" required><option value="">‚Äî S√©lectionner ‚Äî</option><option value="celibataire">C√©libataire</option><option value="conjoint_de_fait">Conjoint de fait</option><option value="marie">Mari√©</option><option value="divorce">Divorc√©</option><option value="veuf_ou_veuve">Veuf (ou veuve)</option></select></div>
</div>
            <div class="col-6">
              <label id="lbl_assureur" for="assureur_actuel">Nom de l‚Äôassureur actuel</label>
              <input id="assureur_actuel" name="assureur_actuel" type="text" placeholder="Ex. Intact, Desjardins, Beneva">
            </div>
            <div class="col-6">
              <label id="lbl_exp" for="experience_totale">Nombre d‚Äôann√©es d‚Äôexp√©rience d‚Äôassurances (total)</label>
              <select id="experience_totale" name="experience_totale">
                <option value="">S√©lectionnez‚Ä¶</option>
                <option>Pas assur√© pr√©sentement</option>
                <option>Moins d'un an</option>
                <option>1 an, mais moins de 2</option>
                <option>2 ans, mais moins de 3</option>
                <option>3 ans, mais moins de 4</option>
                <option>4 ans, mais moins de 5</option>
                <option>5 ans, mais moins de 6</option>
                <option>6 ans et plus</option>
              </select>
            </div>
            <div class="col-12">
              <label id="lbl_adresse" for="adresse">Adresse principale compl√®te</label>
              <input id="adresse" name="adresse" type="text" autocomplete="street-address" placeholder="Num√©ro, rue, ville, code postal">
            </div>
            <div class="col-6">
              <label id="lbl_duradr" for="duree_adresse">Nombre d‚Äôann√©es √† cette adresse</label>
              <select id="duree_adresse" name="duree_adresse">
                <option value="">S√©lectionnez‚Ä¶</option>
                <option>Moins de 6 mois</option>
                <option>Entre 6 mois et un an</option>
                <option>Entre un et deux ans</option>
                <option>Entre deux et trois ans</option>
                <option>Trois ans et plus</option>
              </select>
            </div>
            <div class="col-6">
              <label id="lbl_statutres" for="statut_residence">Statut de la r√©sidence principale</label>
              <select id="statut_residence" name="statut_residence">
                <option value="">‚Äî S√©lectionner ‚Äî</option>
                <option value="proprietaire">Propri√©taire</option>
                <option value="locataire">Locataire</option>
              </select>
            </div>
          </div>
          <div class="help">* Champs obligatoires</div>
        </fieldset>

        <!-- V√âHICULE -->
        <fieldset>
          <legend id="lg_veh">V√©hicule (si soumission auto)</legend>
          <div class="row">
            <div class="col-12">
              <label id="lbl_multi_veh"><input id="multi_veh" type="checkbox"> J'ai plus d'un v√©hicule</label>
              <div id="help_multi_veh" class="help">Ajoutez jusqu‚Äô√† 4 v√©hicules.</div>
            </div>
          </div>
          <div id="vehiculesContainer">
            <div class="veh-card" data-index="0">
              <div class="veh-head">
                <span>V√©hicule #1</span>
                <div class="veh-actions" style="display:none">
                  <button type="button" class="remove-veh">Retirer</button>
                </div>
              </div>
              <div class="row">
                <div class="col-2">
                  <label id="lbl_annee" for="veh_0_annee">Ann√©e</label>
                  <input id="veh_0_annee" name="vehicules[0][annee]" type="number" min="1980" max="2030" step="1" placeholder="2025">
                </div>
                <div class="col-3">
                  <label id="lbl_marque" for="veh_0_marque">Marque</label>
                  <input id="veh_0_marque" name="vehicules[0][marque]" type="text" placeholder="Toyota">
                </div>
                <div class="col-7">
                  <label id="lbl_modele" for="veh_0_modele">Mod√®le</label>
                  <input id="veh_0_modele" name="vehicules[0][modele]" type="text" placeholder="Corolla">
                </div>
      <div class="col-6">
        <label class="lbl_purchase_date" for="veh_0_purchase_date">Date d'achat du v√©hicule *</label>
        <input type="date" id="veh_0_purchase_date" name="veh[0][purchase_date]" required>
      </div>

                <div class="col-12">
                  <label id="lbl_vin" for="veh_0_vin">NIV (VIN)</label>
                  <input id="veh_0_vin" name="vehicules[0][vin]" type="text" placeholder="17 caract√®res">
                </div>
                
                </div>
                <div class="col-6">
                  <label id="lbl_statut_veh">Propri√©taire ou locataire ?</label>
                  <div class="radios">
                    <label><input type="radio" name="vehicules[0][statut_vehicule]" value="proprietaire"> Propri√©taire</label>
                    <label><input type="radio" name="vehicules[0][statut_vehicule]" value="proprietaire_financement"> Propri√©taire (avec financement)</label>
                    <label><input type="radio" name="vehicules[0][statut_vehicule]" value="locataire"> Locataire</label>
                  </div>
                </div>
                <div class="col-6">
                  <label class="lbl_condition">Condition de l‚Äôauto au moment de l‚Äôacquisition</label>
                  <div class="radios">
                    <label><input type="radio" name="vehicules[0][condition]" value="neuve" required> Neuve</label>
                    <label><input type="radio" name="vehicules[0][condition]" value="usagee"> Usag√©e</label>
                    <label><input type="radio" name="vehicules[0][condition]" value="demo"> D√©mo</label>
                  </div>
                </div>

                <div class="col-6">
                  <label id="lbl_dist" for="veh_0_distance_aller">Distance vers travail/√©cole (trajet aller, km)</label>
                  <input id="veh_0_distance_aller" name="vehicules[0][distance_aller_km]" type="number" min="0" step="0.1" placeholder="12">
                  <div id="help_distance" class="inline-help">Entrez <strong>0</strong> si vous n\'utilisez votre v√©hicule que pour le <strong>plaisir</strong>.</div>
      

      <div class="col-6">
        <label class="lbl_km_annuel" for="veh_0_km_annuel">Kilom√©trage annuel par ann√©e fait avec ce v√©hicule. *</label>
        <input type="number" id="veh_0_km_annuel" name="veh[0][km_annuel]" min="0" step="100" required>
      </div>
      


                </div>
                
                </div>
              </div>
            </div>
          </div>
          <div class="actions" id="veh_actions" style="display:none; justify-content:flex-start;">
            <button type="button" class="secondary" id="addVeh">Ajouter un v√©hicule</button>
          </div>
          <template id="veh_template">
            <div class="veh-card" data-index="{{i}}">
              <div class="veh-head">
                <span>V√©hicule #{{n}}</span>
                <div class="veh-actions">
                  <button type="button" class="remove-veh">Retirer</button>
                </div>
              </div>
              <div class="row">
                <div class="col-2">
                  <label for="veh_{{i}}_annee">Ann√©e</label>
                  <input id="veh_{{i}}_annee" name="vehicules[{{i}}][annee]" type="number" min="1980" max="2030" step="1" placeholder="2025">
                </div>
                <div class="col-3">
                  <label for="veh_{{i}}_marque">Marque</label>
                  <input id="veh_{{i}}_marque" name="vehicules[{{i}}][marque]" type="text" placeholder="Toyota">
                </div>
                <div class="col-7">
                  <label for="veh_{{i}}_modele">Mod√®le</label>
                  <input id="veh_{{i}}_modele" name="vehicules[{{i}}][modele]" type="text" placeholder="Corolla">
                </div>
                <div class="col-12">
                  <label for="veh_{{i}}_vin">NIV (VIN)</label>
                  <input id="veh_{{i}}_vin" name="vehicules[{{i}}][vin]" type="text" placeholder="17 caract√®res">
                </div>
                
                </div>
                <div class="col-6">
                  <label id="lbl_statut_veh">Propri√©taire ou locataire ?</label>
                  <div class="radios">
                    <label><input type="radio" name="vehicules[{{i}}][statut_vehicule]" value="proprietaire"> Propri√©taire</label>
                    <label><input type="radio" name="vehicules[{{i}}][statut_vehicule]" value="proprietaire_financement"> Propri√©taire (avec financement)</label>
                    <label><input type="radio" name="vehicules[{{i}}][statut_vehicule]" value="locataire"> Locataire</label>
                  </div>
                </div>
                <div class="col-6">
                  <label class="lbl_condition">Condition de l‚Äôauto au moment de l‚Äôacquisition</label>
                  <div class="radios">
                    <label><input type="radio" name="veh_{{i}}[condition]" value="neuve" required> Neuve</label>
                    <label><input type="radio" name="veh_{{i}}[condition]" value="usagee"> Usag√©e</label>
                    <label><input type="radio" name="veh_{{i}}[condition]" value="demo"> D√©mo</label>
                  </div>
                </div>

                <div class="col-6">
                  <label for="veh_{{i}}_distance_aller">Distance vers travail/√©cole (trajet aller, km)</label>
                  <input id="veh_{{i}}_distance_aller" name="vehicules[{{i}}][distance_aller_km]" type="number" min="0" step="0.1" placeholder="12">
                  <div id="help_distance" class="inline-help">Entrez <strong>0</strong> si vous n\'utilisez votre v√©hicule que pour le <strong>plaisir</strong>.</div>
      <div class="col-6">
        <label class="lbl_km_annuel" for="veh_{{i}}_km_annuel">Kilom√©trage annuel par ann√©e fait avec ce v√©hicule. *</label>
        <input type="number" id="veh_{{i}}_km_annuel" name="veh[TEMPLATE][km_annuel]" min="0" step="100" required>
      </div>

                </div>
                
                </div>
              </div>
            </div>
          </template>
        </fieldset>

        <!-- ADMISSIBILIT√â -->
        <fieldset>
          <legend id="lg_adm">Questions d‚Äôadmissibilit√©</legend>
          <label id="q1">1. Un assureur a-t-il r√©sili√© ou refus√© votre assurance auto dans les 5 derni√®res ann√©es ?</label>
          <div class="radios">
            <label><input type="radio" name="admissibilite_resiliation" value="oui" required> Oui</label>
            <label><input type="radio" name="admissibilite_resiliation" value="non"> Non</label>
          </div>
          <label id="q2">2. Un permis de conduire a-t-il d√©j√† √©t√© suspendu ou r√©voqu√© dans votre m√©nage ou vous-m√™me ?</label>
          <div class="radios">
            <label><input type="radio" name="admissibilite_permis" value="oui" required> Oui</label>
            <label><input type="radio" name="admissibilite_permis" value="non"> Non</label>
          </div>
          <label id="q3">3. Quelqu‚Äôun de votre m√©nage ou vous-m√™me a-t-il d√©j√† eu des poursuites ou √©t√© accus√© au civil ou criminel ?</label>
          <div class="radios">
            <label><input type="radio" name="admissibilite_judiciaire" value="oui" required> Oui</label>
            <label><input type="radio" name="admissibilite_judiciaire" value="non"> Non</label>
          </div>
        </fieldset>

        <!-- COUVERTURE -->
        <fieldset>
          <legend id="lg_cov">Couverture souhait√©e</legend>
          <div class="checks">
            <label><input id="cov_resp_uni" type="checkbox" name="couverture[]" value="responsabilite_uniquement"><span id="opt_respuni">Responsabilit√© civile uniquement</span></label>
            <label><input id="cov_collision" type="checkbox" name="couverture[]" value="collision"><span id="opt_collision">Collision</span></label>
            <label><input id="cov_trsc" type="checkbox" name="couverture[]" value="tous_risques_sauf_collision"><span id="opt_trsc">Tous risques sauf collision</span></label>
            <label><input id="cov_tr" type="checkbox" name="couverture[]" value="tous_risques"><span id="opt_tr">Tous risques</span></label>
          </div>
          <div id="help_cov" class="help">¬´ Tous risques ¬ª inclut <strong>collision, feu, vol et vandalisme</strong>. ¬´ Tous risques sauf collision ¬ª couvre <strong>feu, vol, vandalisme</strong>.</div>
        </fieldset>

        <!-- RESPONSABILIT√â CIVILE -->
        <fieldset>
          <legend id="lg_resp">Responsabilit√© civile</legend>
          <div class="row">
            <div class="col-6">
              <label id="lbl_resp" for="responsabilite_civile">Montant de couverture *</label>
              <select id="responsabilite_civile" name="responsabilite_civile" required>
                <option value="">‚Äî S√©lectionner ‚Äî</option>
                <option value="1M">1 000 000 $</option>
                <option value="2M">2 000 000 $</option>
              </select>
            </div>
          </div>
        </fieldset>

        <!-- FRANCHISES -->
        <fieldset>
          <legend id="lg_fr">Franchises</legend>
          <div class="two-col" style="display:flex;gap:26px;flex-wrap:wrap">
            <div style="flex:1 1 280px">
              <label id="lbl_fr_coll" for="franchise_collision">Franchise ‚Äì Collision</label>
              <select id="franchise_collision" name="franchise_collision" disabled>
                <option value="">‚Äî S√©lectionner ‚Äî</option>
                <option value="0">$0</option><option value="250">$250</option><option value="500">$500</option><option value="750">$750</option><option value="1000">$1000</option><option value="1250">$1250</option><option value="1500">$1500</option><option value="1750">$1750</option><option value="2000">$2000</option>
              </select>
            </div>
            <div style="flex:1 1 280px">
              <label id="lbl_fr_trsc" for="franchise_trsc">Franchise ‚Äì Tous risques sauf collision</label>
              <select id="franchise_trsc" name="franchise_trsc" disabled>
                <option value="">‚Äî S√©lectionner ‚Äî</option>
                <option value="0">$0</option><option value="250">$250</option><option value="500">$500</option><option value="750">$750</option><option value="1000">$1000</option><option value="1250">$1250</option><option value="1500">$1500</option><option value="1750">$1750</option><option value="2000">$2000</option>
              </select>
            </div>
          </div>
          <div id="help_fr" class="help">Choisissez une franchise de 0 $ √† 2 000 $ par paliers de 250 $.</div>
        </fieldset>

        <!-- RENOUVELLEMENT -->
        <fieldset>
          <legend id="lg_ren">Renouvellement</legend>
          <div class="row">
            <div class="col-12">
              <label id="lbl_ech" for="date_echeance"><strong>Quelle est la date d‚Äô√©ch√©ance de ton contrat d‚Äôassurance actuel ? *</strong></label>
              <input id="date_echeance" name="date_echeance" type="date" required>
              <div class="help">Nous te contacterons durant <span id="moisEcheance">le mois du renouvellement</span>.</div>
            </div>
            <div class="col-6">
              <label id="lbl_produit" for="produit">Produit concern√© *</label>
              <select id="produit" name="produit" required>
                <option value="">‚Äî S√©lectionner ‚Äî</option>
                <option value="auto">Auto</option>
                <option value="habitation">Habitation</option>
                <option value="auto_habitation">Auto & Habitation</option>
              </select>
            </div>
          </div>
        </fieldset>

        <!-- PRIME -->
        <fieldset>
          <legend id="lg_prime">Prime actuelle et commentaires</legend>
          <textarea id="commentaires" name="commentaires" placeholder="Exemple : Prime √† battre 1 200 $/an ou 110 $/mois"></textarea>
        </fieldset>

        <!-- DISPONIBILIT√âS -->
        <fieldset>
          <legend id="lg_dispos">Disponibilit√©s pour un retour d'appel</legend>
          <div id="help_dispos" class="help">Choisissez vos journ√©es et les moments qui vous conviennent pour qu‚Äôon vous rappelle.</div>
          <div class="row">
            <div class="col-12">
              <label id="lbl_jours">Journ√©es disponibles (lundi √† samedi)</label>
              <div class="days">
                <label><input type="checkbox" name="disponibilites[jours][]" value="lundi"> Lundi</label>
                <label><input type="checkbox" name="disponibilites[jours][]" value="mardi"> Mardi</label>
                <label><input type="checkbox" name="disponibilites[jours][]" value="mercredi"> Mercredi</label>
                <label><input type="checkbox" name="disponibilites[jours][]" value="jeudi"> Jeudi</label>
                <label><input type="checkbox" name="disponibilites[jours][]" value="vendredi"> Vendredi</label>
                <label><input id="jour_samedi" type="checkbox" name="disponibilites[jours][]" value="samedi"> Samedi</label>
              </div>
            </div>
            <div class="col-12" style="margin-top:10px">
              <label id="lbl_moments">Moments de la journ√©e</label>
              <div class="radios" id="plages">
                <label><input id="plage_toute" type="radio" name="disponibilites[plage]" value="toute_la_journee"> Toute la journ√©e</label>
                <label><input id="plage_avant" type="radio" name="disponibilites[plage]" value="avant_midi"> Avant midi (08h‚Äì12h)</label>
                <label><input id="plage_apres" type="radio" name="disponibilites[plage]" value="apres_midi"> Apr√®s‚Äëmidi (12h‚Äì17h)</label>
                <label><input id="plage_soir" type="radio" name="disponibilites[plage]" value="soir"> En soir√©e (17h‚Äì20h)</label>
              </div>
              <div id="noteSamedi" class="note-samedi">Le samedi : disponibilit√© <strong>08h‚Äì12h</strong> uniquement.</div>
            </div>
          </div>
        </fieldset>

        <!-- CONSENTEMENTS -->
        <fieldset>
          <legend id="lg_consent">Consentements (obligatoires)</legend>
          <label class="consent">
            <input type="checkbox" id="consent_contact" name="consent_contact" required>
            <span id="c_contact">Je consens √† √™tre contact√© pour une soumission d‚Äôassurance.</span>
          </label>
          <label class="consent">
            <input type="checkbox" id="consent_permis" name="consent_permis" required>
            <span id="c_permis">Je consens √† fournir mon num√©ro de permis de conduire pour permettre la consultation de l‚Äôhistorique de r√©clamations.</span>
          </label>
          <label class="consent">
            <input type="checkbox" id="consent_credit_allstate" name="consent_credit_allstate" required>
            <span id="c_credit">J‚Äôautorise Allstate du Canada √† effectuer une v√©rification rapide de mon dossier de cr√©dit afin d‚Äô√©tablir la meilleure prime possible, <strong>sans impact sur votre pointage de cr√©dit</strong>.</span>
          </label>
          <div id="help_consent" class="help">Les trois consentements sont requis pour soumettre le formulaire.</div>
        </fieldset>

        <!-- Actions -->
        <div class="actions">
          <button type="reset" class="secondary" id="btn_reset">Effacer</button>
          <button type="submit" id="btn_submit">Envoyer la demande</button>
        </div>

        <!-- Bas de formulaire : logos -->
        
<div class="brand-footer">
  <div id="brand_left" class="brand-left">AF Assurance</div>
  <div class="af-sign" aria-label="Signature AF">Af</div>
</div>
</form>

</div>

      </form>
    </div>
  </div>

  <script>
    // Affichage du mois d'√©ch√©ance
    const dateInput = document.getElementById('date_echeance');
    const moisSpan = document.getElementById('moisEcheance');
    const mois = ["janvier","f√©vrier","mars","avril","mai","juin","juillet","ao√ªt","septembre","octobre","novembre","d√©cembre"];
    function updateMois(){
      if(!dateInput || !moisSpan) return;
      if(!dateInput.value){ moisSpan.textContent = "le mois du renouvellement"; return; }
      const d = new Date(dateInput.value + "T12:00:00");
      if(isNaN(d)) { moisSpan.textContent = "le mois du renouvellement"; return; }
      moisSpan.textContent = mois[d.getMonth()] + " " + d.getFullYear();
    }
    if(dateInput){ dateInput.addEventListener('change', updateMois); updateMois(); }

    // Multi-v√©hicules
    const multiVeh = document.getElementById('multi_veh');
    const vehContainer = document.getElementById('vehiculesContainer');
    const vehActions = document.getElementById('veh_actions');
    const templ = document.getElementById('veh_template')?.innerHTML || "";
    function currentVehCount(){ return vehContainer.querySelectorAll('.veh-card').length; }
    function refreshVehHeaders(){ vehContainer.querySelectorAll('.veh-card').forEach((card, idx)=>{ card.querySelector('.veh-head span').textContent = "V√©hicule #"+(idx+1); }); }
    function enableMultiVeh(enabled){
      if(!vehActions) return;
      vehActions.style.display = enabled ? 'flex' : 'none';
      vehContainer.querySelectorAll('.veh-card').forEach((card, idx)=>{ 
        const ra = card.querySelector('.veh-actions');
        if(ra) ra.style.display = enabled && idx>0 ? 'block' : 'none';
      });
    }
    function addVehicle(){
      const maxVeh = 4;
      let count = currentVehCount();
      if(count>=maxVeh){ alert("Maximum 4 v√©hicules."); return; }
      const i=count;
      const html = templ.replaceAll("{{i}}", i).replaceAll("{{n}}", i+1);
      const wrapper = document.createElement('div'); wrapper.innerHTML = html.trim();
      const card = wrapper.firstElementChild; vehContainer.appendChild(card);
      attachRemoveHandler(card); refreshVehHeaders(); enableMultiVeh(true);
    }
    function attachRemoveHandler(card){
      const btn = card.querySelector('.remove-veh');
      if(btn){ btn.addEventListener('click', ()=>{ card.remove(); refreshVehHeaders(); enableMultiVeh(multiVeh.checked); }); }
    }
    attachRemoveHandler(vehContainer.querySelector('.veh-card'));
    if(multiVeh){ 
      multiVeh.addEventListener('change', e=> enableMultiVeh(e.target.checked));
      const addVehBtn = document.getElementById('addVeh');
      if(addVehBtn){ addVehBtn.addEventListener('click', addVehicle); }
    }

    // Couvertures & franchises
    const covTR = document.getElementById('cov_tr');
    const covColl = document.getElementById('cov_collision');
    const covTRSC = document.getElementById('cov_trsc');
    const covRespUni = document.getElementById('cov_resp_uni');
    const otherCovers = [covColl, covTRSC].filter(Boolean);
    const allCovers = [covColl, covTRSC, covTR].filter(Boolean);
    const selFrColl = document.getElementById('franchise_collision');
    const selFrTRSC = document.getElementById('franchise_trsc');
    function applyCoverageExclusivity(){
      if(covTR && covTR.checked){ otherCovers.forEach(cb=>{ cb.checked=false; cb.disabled=true; }); } else { otherCovers.forEach(cb=> cb.disabled=false); }
      const anyOther = otherCovers.some(cb=> cb && cb.checked);
      if(covTR) covTR.disabled = anyOther;
      if(covRespUni && covRespUni.checked){ allCovers.forEach(cb=>{ cb.checked=false; cb.disabled=true; }); } else { allCovers.forEach(cb=> cb.disabled=false); }
    }
    function updateFranchiseEnablement(){
      if(covRespUni && covRespUni.checked){ selFrColl.disabled=true; selFrColl.value=""; selFrTRSC.disabled=true; selFrTRSC.value=""; return; }
      if(covTR && covTR.checked){ selFrColl.disabled=false; selFrTRSC.disabled=false; return; }
      selFrColl.disabled=!(covColl && covColl.checked); if(selFrColl.disabled) selFrColl.value="";
      selFrTRSC.disabled=!(covTRSC && covTRSC.checked); if(selFrTRSC.disabled) selFrTRSC.value="";
    }
    function handleCoverageChange(){ applyCoverageExclusivity(); updateFranchiseEnablement(); }
    [covTR, covColl, covTRSC, covRespUni].filter(Boolean).forEach(cb => cb.addEventListener('change', handleCoverageChange));
    handleCoverageChange();

    // Disponibilit√©s : samedi = 08h‚Äì12h uniquement
    const samedi = document.getElementById('jour_samedi');
    const plageToute = document.getElementById('plage_toute');
    const plageAvant = document.getElementById('plage_avant');
    const plageApres = document.getElementById('plage_apres');
    const plageSoir  = document.getElementById('plage_soir');
    const noteSamedi = document.getElementById('noteSamedi');
    function setDisabled(el, disabled){ if(!el) return; el.disabled = disabled; if(disabled && el.checked) el.checked = false; }
    function adjustSamedi(){
      if(!samedi) return;
      if(samedi.checked){
        setDisabled(plageToute, true);
        setDisabled(plageApres, true);
        setDisabled(plageSoir, true);
        plageAvant.disabled = false;
        if(!plageAvant.checked){ plageAvant.checked = true; }
        if(noteSamedi) noteSamedi.style.display = 'block';
      }else{
        [plageToute, plageAvant, plageApres, plageSoir].forEach(el => { if(el) el.disabled = false; });
        if(noteSamedi) noteSamedi.style.display = 'none';
      }
    }
    if(samedi){ samedi.addEventListener('change', adjustSamedi); adjustSamedi(); }

    // Validation minimale
    document.getElementById('soumission').addEventListener('submit', function(e){
      if(!this.checkValidity()){
        e.preventDefault();
        alert("Merci de compl√©ter les champs obligatoires et de cocher les 3 consentements.");
      }
    });
  </script>


<script>
(function(){
  const T = {
    fr: {
      hdr_title: "AF Assurances ‚Äì Soumission d‚Äôassurance",
      hdr_sub: "Auto ‚Ä¢ Habitation ‚Äî Accessible, claire & humaine",
      lg_infos: "Informations personnelles",
      lbl_prenom: "Pr√©nom *",
      lbl_nom: "Nom de famille *",
      lbl_dn: "Date de naissance *",
      lbl_email: "Courriel *",
      lbl_tel: "T√©l√©phone *",
      lbl_assureur: "Nom de l‚Äôassureur actuel",
      lbl_exp: "Nombre d‚Äôann√©es d‚Äôexp√©rience d‚Äôassurances (total)",
      lbl_adresse: "Adresse principale compl√®te",
      lbl_duradr: "Nombre d‚Äôann√©es √† cette adresse",
      lbl_statutres: "Statut de la r√©sidence principale",
      lg_veh: "V√©hicule (si soumission auto)",
      lbl_etat_achat: "√âtat du v√©hicule lors de l‚Äôachat",
      lbl_statut_veh: "Propri√©taire ou locataire ?",
      lbl_condition: "Condition de l‚Äôauto au moment de l‚Äôacquisition",
      lbl_purchase_date: "Date d'achat du v√©hicule *",
      lbl_annee: "Ann√©e",
      lbl_marque: "Marque",
      lbl_modele: "Mod√®le",
      lbl_km_annuel: "Kilom√©trage annuel par ann√©e fait avec ce v√©hicule. *",
      lbl_dist: "Distance vers travail/√©cole (trajet aller, km)",
      lg_adm: "Questions d‚Äôadmissibilit√©",
      q1: "1. Un assureur a-t-il r√©sili√© ou refus√© votre assurance auto dans les 5 derni√®res ann√©es ?",
      q2: "2. Un permis de conduire a-t-il d√©j√† √©t√© suspendu ou r√©voqu√© dans votre m√©nage ou vous-m√™me ?",
      q3: "3. Quelqu‚Äôun de votre m√©nage ou vous-m√™me a-t-il d√©j√† eu des poursuites ou √©t√© accus√© au civil ou criminel ?",
      lg_cov: "Couverture souhait√©e",
      opt_respuni: "Responsabilit√© civile uniquement",
      opt_collision: "Collision",
      opt_trsc: "Tous risques sauf collision",
      opt_tr: "Tous risques",
      help_cov: "¬´ Tous risques ¬ª inclut <strong>collision, feu, vol et vandalisme</strong>. ¬´ Tous risques sauf collision ¬ª couvre <strong>feu, vol, vandalisme</strong>.",
      lg_resp: "Responsabilit√© civile",
      lbl_resp: "Montant de couverture *",
      lg_fr: "Franchises",
      lbl_fr_coll: "Franchise ‚Äì Collision",
      lbl_fr_trsc: "Franchise ‚Äì Tous risques sauf collision",
      help_fr: "Choisissez une franchise de 0 $ √† 2 000 $ par paliers de 250 $.",
      lg_ren: "Renouvellement",
      lbl_ech: "Quelle est la date d‚Äô√©ch√©ance de ton contrat d‚Äôassurance actuel ? *",
      lbl_produit: "Produit concern√© *",
      lg_prime: "Prime actuelle et commentaires",
      lg_dispos: "Disponibilit√©s pour un retour d'appel",
      help_dispos: "Choisissez vos journ√©es et les moments qui vous conviennent pour qu‚Äôon vous rappelle.",
      lbl_jours: "Journ√©es disponibles (lundi √† samedi)",
      lbl_moments: "Moments de la journ√©e",
      plage_toute: "Toute la journ√©e",
      plage_avant: "Avant midi (08h‚Äì12h)",
      plage_apres: "Apr√®s‚Äëmidi (12h‚Äì17h)",
      plage_soir: "En soir√©e (17h‚Äì20h)",
      note_samedi: "Le samedi : disponibilit√© <strong>08h‚Äì12h</strong> uniquement.",
      lg_consent: "Consentements (obligatoires)",
      c_contact: "Je consens √† √™tre contact√© pour une soumission d‚Äôassurance.",
      c_permis: "Je consens √† fournir mon num√©ro de permis de conduire pour permettre la consultation de l‚Äôhistorique de r√©clamations.",
      c_credit: "J‚Äôautorise Allstate du Canada √† effectuer une v√©rification rapide de mon dossier de cr√©dit afin d‚Äô√©tablir la meilleure prime possible, <strong>sans impact sur votre pointage de cr√©dit</strong>.",
      help_consent: "Les trois consentements sont requis pour soumettre le formulaire.",
      btn_reset: "Effacer",
      btn_submit: "Envoyer la demande",
      brand_left: "AF Assurance"
    },
    en: {
      hdr_title: "AF Insurance ‚Äì Quote Request",
      hdr_sub: "Auto ‚Ä¢ Home ‚Äî Simple, clear & helpful",
      lg_infos: "Personal information",
      lbl_prenom: "First name *",
      lbl_nom: "Last name *",
      lbl_dn: "Date of birth *",
      lbl_email: "Email *",
      lbl_tel: "Phone *",
      lbl_assureur: "Current insurer name",
      lbl_exp: "Total insurance experience (years)",
      lbl_adresse: "Primary address (full)",
      lbl_duradr: "Years at this address",
      lbl_statutres: "Primary residence status",
      lg_veh: "Vehicle (if auto quote)",
      lbl_etat_achat: "Vehicle condition at purchase",
      lbl_statut_veh: "Owner or lessee?",
      lbl_condition: "Vehicle condition at purchase",
      lbl_purchase_date: "Vehicle purchase date *",
      lbl_annee: "Year",
      lbl_marque: "Make",
      lbl_modele: "Model",
      lbl_km_annuel: "Annual mileage (km) *",
      lbl_dist: "Distance to work/school (one‚Äëway, km)",
      lg_adm: "Eligibility questions",
      q1: "1. Has an insurer cancelled or refused your auto insurance in the last 5 years?",
      q2: "2. Has any driver in your household, or yourself, had a suspended or revoked licence?",
      q3: "3. Has anyone in your household, or yourself, faced lawsuits or been charged (civil or criminal)?",
      lg_cov: "Desired coverage",
      opt_respuni: "Liability only",
      opt_collision: "Collision",
      opt_trsc: "Comprehensive (excluding collision)",
      opt_tr: "All perils",
      help_cov: "‚ÄúAll perils‚Äù includes <strong>collision, fire, theft and vandalism</strong>. ‚ÄúComprehensive (excl. collision)‚Äù covers <strong>fire, theft, vandalism</strong>.",
      lg_resp: "Civil liability",
      lbl_resp: "Coverage amount *",
      lg_fr: "Deductibles",
      lbl_fr_coll: "Deductible ‚Äì Collision",
      lbl_fr_trsc: "Deductible ‚Äì Comprehensive (excl. collision)",
      help_fr: "Choose a deductible from $0 to $2,000 in $250 steps.",
      lg_ren: "Renewal",
      lbl_ech: "What is the renewal date of your current insurance policy? *",
      lbl_produit: "Product *",
      lg_prime: "Current premium & notes",
      lg_dispos: "Call-back availability",
      help_dispos: "Pick your preferred days and times for us to call you.",
      lbl_jours: "Available days (Monday to Saturday)",
      lbl_moments: "Time of day",
      plage_toute: "All day",
      plage_avant: "Morning (08:00‚Äì12:00)",
      plage_apres: "Afternoon (12:00‚Äì17:00)",
      plage_soir: "Evening (17:00‚Äì20:00)",
      note_samedi: "On Saturdays: <strong>08:00‚Äì12:00</strong> only.",
      lg_consent: "Consents (required)",
      c_contact: "I agree to be contacted for an insurance quote.",
      c_permis: "I agree to provide my driver‚Äôs licence number to review my claim history.",
      c_credit: "I authorize Allstate of Canada to perform a quick credit check to determine the best possible rate, <strong>with no impact on your credit score</strong>.",
      help_consent: "All three consents are required to submit the form.",
      btn_reset: "Clear",
      btn_submit: "Submit request",
      brand_left: "AF Assurance"
    }
  };

  const map = {
    hdr_title:'#hdr_title', hdr_sub:'#hdr_sub',
    lg_infos:'#lg_infos', lg_veh:'#lg_veh', lg_adm:'#lg_adm', lg_cov:'#lg_cov', lg_resp:'#lg_resp',
    lg_fr:'#lg_fr', lg_ren:'#lg_ren', lg_prime:'#lg_prime', lg_dispos:'#lg_dispos', lg_consent:'#lg_consent',
    lbl_prenom:'#lbl_prenom', lbl_nom:'#lbl_nom', lbl_dn:'#lbl_dn', lbl_email:'#lbl_email', lbl_tel:'#lbl_tel',
    lbl_assureur:'#lbl_assureur', lbl_exp:'#lbl_exp', lbl_adresse:'#lbl_adresse', lbl_duradr:'#lbl_duradr',
    lbl_statutres:'#lbl_statutres', lbl_etat_achat:'#lbl_etat_achat', lbl_statut_veh:'#lbl_statut_veh',
    lbl_dist:'#lbl_dist', q1:'#q1', q2:'#q2', q3:'#q3', opt_respuni:'#opt_respuni', opt_collision:'#opt_collision',
    opt_trsc:'#opt_trsc', opt_tr:'#opt_tr', help_cov:'#help_cov', lbl_resp:'#lbl_resp', lbl_fr_coll:'#lbl_fr_coll',
    lbl_fr_trsc:'#lbl_fr_trsc', help_fr:'#help_fr', lbl_ech:'#lbl_ech', lbl_produit:'#lbl_produit',
    lg_prime:'#lg_prime', help_dispos:'#help_dispos', lbl_jours:'#lbl_jours', lbl_moments:'#lbl_moments',
    note_samedi:'#noteSamedi', c_contact:'#c_contact', c_permis:'#c_permis', c_credit:'#c_credit',
    help_consent:'#help_consent', btn_reset:'#btn_reset', btn_submit:'#btn_submit', brand_left:'#brand_left'
  };

  function setLang(lang){
    const dict = T[lang] || T.fr;
    for(const k in map){
      const el = document.querySelector(map[k]);
      if(!el || dict[k] == null) continue;
      el.innerHTML = dict[k];
    }
    // Product options
    const prod = document.getElementById('produit');
    if(prod){
      prod.querySelector('option[value=""]').textContent = (lang==='en'?'‚Äî Select ‚Äî':'‚Äî S√©lectionner ‚Äî');
      prod.querySelector('option[value="auto"]').textContent = (lang==='en'?'Auto':'Auto');
      prod.querySelector('option[value="habitation"]').textContent = (lang==='en'?'Home':'Habitation');
      prod.querySelector('option[value="auto_habitation"]').textContent = (lang==='en'?'Auto & Home':'Auto & Habitation');
    }
    // Experience options
    const exp = document.getElementById('experience_totale');
    if(exp){
      const optsFR = ["S√©lectionnez‚Ä¶","Pas assur√© pr√©sentement","Moins d'un an","1 an, mais moins de 2","2 ans, mais moins de 3","3 ans, mais moins de 4","4 ans, mais moins de 5","5 ans, mais moins de 6","6 ans et plus"];
      const optsEN = ["Select‚Ä¶","Not currently insured","Less than 1 year","1 year, but less than 2","2 years, but less than 3","3 years, but less than 4","4 years, but less than 5","5 years, but less than 6","6 years and more"];
      const list = (lang==='en'?optsEN:optsFR);
      exp.querySelectorAll('option').forEach((o,i)=>{ if(list[i]!==undefined) o.textContent=list[i]; });
    }
    // Residence status options
    const sr = document.getElementById('statut_residence');
    if(sr){
      sr.querySelector('option[value=""]').textContent = (lang==='en'?'‚Äî Select ‚Äî':'‚Äî S√©lectionner ‚Äî');
      sr.querySelector('option[value="proprietaire"]').textContent = (lang==='en'?'Owner':'Propri√©taire');
      sr.querySelector('option[value="locataire"]').textContent = (lang==='en'?'Tenant':'Locataire');
    }
    // Marital status options
    const ec = document.getElementById('etat_civil');
    if(ec){
      ec.querySelector('option[value=""]').textContent = (lang==='en'?'‚Äî Select ‚Äî':'‚Äî S√©lectionner ‚Äî');
      const mapEC = lang==='en'
        ? [["celibataire","Single"],["conjoint_de_fait","Common‚Äëlaw"],["marie","Married"],["divorce","Divorced"],["veuf_ou_veuve","Widowed"]]
        : [["celibataire","C√©libataire"],["conjoint_de_fait","Conjoint de fait"],["marie","Mari√©"],["divorce","Divorc√©"],["veuf_ou_veuve","Veuf (ou veuve)"]];
      mapEC.forEach(function(pair){
        var v = pair[0], txt = pair[1];
        var o = ec.querySelector('option[value="'+v+'"]');
        if(o) o.textContent = txt;
      });
    }
    // Days labels
    const days = [["lundi","Monday"],["mardi","Tuesday"],["mercredi","Wednesday"],["jeudi","Thursday"],["vendredi","Friday"],["samedi","Saturday"]];
    days.forEach(function(pair){
      var fr = pair[0], en = pair[1];
      document.querySelectorAll('input[type="checkbox"][value="'+fr+'"]').forEach(function(inp){
        const lbl = inp.closest('label');
        if(lbl){
          const text = (lang==='en'?en: fr[0].toUpperCase()+fr.slice(1));
          // rebuild label content keeping input
          lbl.innerHTML = '';
          lbl.appendChild(inp);
          lbl.appendChild(document.createTextNode(' ' + text));
        }
      });
    });
    // Time of day labels
    const times = {
      'plage_toute': ['Toute la journ√©e','All day'],
      'plage_avant': ['Avant midi (08h‚Äì12h)','Morning (08:00‚Äì12:00)'],
      'plage_apres': ['Apr√®s‚Äëmidi (12:00‚Äì17:00)','Afternoon (12:00‚Äì17:00)'],
      'plage_soir' : ['En soir√©e (17:00‚Äì20:00)','Evening (17:00‚Äì20:00)']
    };
    Object.keys(times).forEach(function(id){
      const input = document.getElementById(id);
      if(input){
        const lbl = input.closest('label');
        if(lbl){
          const txt = (lang==='en'?times[id][1]:times[id][0]);
          // rebuild label content keeping input
          lbl.innerHTML = '';
          lbl.appendChild(input);
          lbl.appendChild(document.createTextNode(' ' + txt));
        }
      }
    });

    localStorage.setItem('lang_af', lang);
    try{ document.querySelectorAll('.lbl_condition').forEach(function(el){ el.textContent = (dict['lbl_condition'] || el.textContent); }); }catch(e){}

    try{
      document.querySelectorAll('.lbl_km_annuel').forEach(function(el){ el.textContent = (dict['lbl_km_annuel'] || el.textContent); });
      document.querySelectorAll('.lbl_purchase_date').forEach(function(el){ el.textContent = (dict['lbl_purchase_date'] || el.textContent); });
    }catch(e){}

    try{ document.querySelectorAll('.lbl_km_annuel').forEach(function(el){ el.textContent = (dict['lbl_km_annuel'] || el.textContent); }); }catch(e){}
    [['lbl_etat_civil','#lbl_etat_civil'],['lbl_annee','#lbl_annee'],['lbl_marque','#lbl_marque'],['lbl_modele','#lbl_modele'],['lbl_vin','#lbl_vin'],['lbl_multi_veh','#lbl_multi_veh'],['help_multi_veh','#help_multi_veh'],['help_perm_p','#help_perm_p'],['help_perm_n','#help_perm_n'],['help_distance','#help_distance']].forEach(function(pair){ var k=pair[0], sel=pair[1]; var el=document.querySelector(sel); if(el && T[lang][k]) el.innerHTML=T[lang][k]; });
    var ta=document.getElementById('commentaires'); if(ta && dict['ph_prime']) ta.placeholder=dict['ph_prime'];
    var hp=document.getElementById('help_perm_p'); if(hp && dict['help_perm_p']) hp.innerHTML=dict['help_perm_p'];
    var hn=document.getElementById('help_perm_n'); if(hn && dict['help_perm_n']) hn.innerHTML=dict['help_perm_n'];
    var hd=document.getElementById('help_distance'); if(hd && dict['help_distance']) hd.innerHTML=dict['help_distance'];
    var ta=document.getElementById('commentaires'); if(ta && dict['ph_prime']) ta.placeholder=dict['ph_prime'];
    var hp=document.getElementById('help_perm_p'); if(hp && dict['help_perm_p']) hp.innerHTML=dict['help_perm_p'];
    var hn=document.getElementById('help_perm_n'); if(hn && dict['help_perm_n']) hn.innerHTML=dict['help_perm_n'];
    document.querySelectorAll('.veh-head span').forEach(function(sp,i){
      var base = (lang==='en'?'Vehicle #':'V√©hicule #');
      var m = sp.textContent.match(/#\s*(\d+)/); var num = m?m[1]:(i+1);
      sp.textContent = base + num;
    });
    document.querySelectorAll('input[type="radio"][name$="[statut_vehicule]"]').forEach(function(inp){
      var lbl = inp.closest('label'); if(!lbl) return;
      if(inp.value==='proprietaire'){ lbl.lastChild.nodeValue = (lang==='en'?' Owner':' Propri√©taire'); }
      if(inp.value==='proprietaire_financement'){ lbl.lastChild.nodeValue = (lang==='en'?' Owner (with financing)':' Propri√©taire (avec financement)'); }
      if(inp.value==='locataire'){ lbl.lastChild.nodeValue = (lang==='en'?' Lessee':' Locataire'); }
    });
    document.querySelectorAll('input[type="radio"][name$="[condition]"]').forEach(function(inp){
      var lbl = inp.closest('label'); if(!lbl) return;
      if(inp.value==='neuve'){ lbl.lastChild.nodeValue = (lang==='en'?' New':' Neuve'); }
      if(inp.value==='usagee'){ lbl.lastChild.nodeValue = (lang==='en'?' Used':' Usag√©e'); }
      if(inp.value==='demo'){ lbl.lastChild.nodeValue = (lang==='en'?' Demo':' D√©mo'); }
    });
    document.querySelectorAll('input[type="radio"][name$="[etat_achat]"]').forEach(function(inp){
      var lbl = inp.closest('label'); if(!lbl) return;
      if(inp.value==='neuf'){ lbl.lastChild.nodeValue = (lang==='en'?' New':' Neuf'); }
      if(inp.value==='demo'){ lbl.lastChild.nodeValue = (lang==='en'?' Demo':' D√©monstration'); }
      if(inp.value==='occasion'){ lbl.lastChild.nodeValue = (lang==='en'?' Used':' Usag√©e'); }
    });
    var ta = document.getElementById('commentaires'); if(ta){ ta.placeholder = (dict['ph_prime'] || ta.placeholder); }
  }

  document.addEventListener('DOMContentLoaded', function(){
    const sel = document.getElementById('langSelect');
    const saved = localStorage.getItem('lang_af') || 'fr';
    if(sel){
      sel.value = saved;
      setLang(saved);
      sel.addEventListener('change', function(e){ setLang(e.target.value); });
    }
  });
})();
</script>



<script>
(function(){
  const form = document.getElementById('soumission');
  const alertBox = document.getElementById('formAlert');

  function showAlert(message, ok=true){
    if(!alertBox) return;
    alertBox.style.display = 'block';
    alertBox.innerHTML = message;
    if(ok){
      alertBox.style.background = '#f6fbf6';
      alertBox.style.color = '#0f5132';
      alertBox.style.borderColor = '#cfe7d2';
    }else{
      alertBox.style.background = '#fff6f6';
      alertBox.style.color = '#842029';
      alertBox.style.borderColor = '#f3c2c6';
    }
    alertBox.scrollIntoView({behavior:'smooth', block:'center'});
  }

  if(form){
    form.addEventListener('submit', async function(e){
      // keep our validation: if invalid, block and show native message
      if(!form.checkValidity()){
        e.preventDefault();
        showAlert("Merci de compl√©ter les champs obligatoires et de cocher les 3 consentements.", false);
        return;
      }
      e.preventDefault();
      const data = new FormData(form);
      try{
        const r = await fetch(form.action, {
          method: 'POST',
          body: data,
          headers: { 'Accept': 'application/json' }
        });
        if(r.ok){
          showAlert("‚úÖ AF Assurance a bien re√ßu votre formulaire. Nous vous contacterons tr√®s bient√¥t !", true);
          form.reset();
          // recalculer √©tats (ex. couvertures/franchises, samedi, mois d‚Äô√©ch√©ance)
          try{
            const evt = new Event('change');
            document.getElementById('jour_samedi')?.dispatchEvent(evt);
            document.getElementById('date_echeance')?.dispatchEvent(new Event('change'));
            // D√©sactiver franchises selon cases d√©coch√©es par le reset
            const evts = ['cov_tr','cov_collision','cov_trsc','cov_resp_uni'];
            evts.forEach(id => document.getElementById(id)?.dispatchEvent(new Event('change')));
          }catch(_){}
        }else{
          showAlert("‚ùå Une erreur est survenue lors de l‚Äôenvoi. Merci de r√©essayer dans un instant.", false);
        }
      }catch(err){
        showAlert("‚ùå Impossible de contacter le service pour l‚Äôinstant. V√©rifiez votre connexion et r√©essayez.", false);
      }
    }, { capture: true });
  }
})();
</script>

</body>
</html>
